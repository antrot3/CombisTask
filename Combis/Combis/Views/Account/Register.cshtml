@model CommonLayer.DtoModells.UserCreateDto

<h2>Register</h2>

<form id="registerForm" method="post">
    <div>
        <label for="FullName">Full Name</label>
        <input id="FullName" name="FullName" type="text" placeholder="Full Name" required />
    </div>
    <div>
        <label for="Email">Email</label>
        <input id="Email" name="Email" type="email" placeholder="Email" required />
    </div>
    <div>
        <label for="Password">Password</label>
        <input id="Password" name="Password" type="password" placeholder="Password" required />
    </div>
    <div>
        <label>
            <input id="IsAdministrator" name="IsAdministrator" type="checkbox" />
            Is Admin
        </label>
    </div>
    <button type="submit">Register</button>
</form>

<!-- Link to Swagger -->
<p>Want to see the API documentation? <a href="/swagger" target="_blank">View Swagger Docs</a></p>

<script>
    // JavaScript for submitting the registration form
    document.getElementById("registerForm").addEventListener("submit", async function (e) {
        e.preventDefault();  // Prevent default form submission

        // Create an object to hold the form data
        let formData = {
            FullName: document.getElementById("FullName").value,
            Email: document.getElementById("Email").value,
            Password: document.getElementById("Password").value,
            IsAdministrator: document.getElementById("IsAdministrator").checked
        };

        try {
            // Send the data via fetch to the server
            const response = await fetch('@Url.Action("Register", "Account")', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',  // Set the correct content type for JSON
                },
                body: JSON.stringify(formData)  // Send form data as JSON
            });

            if (response.ok) {
                // Redirect to login page after successful registration
                window.location.href = '@Url.Action("Login", "Account")';
            } else {
                // Show error if registration fails
                alert('Registration failed. Please try again.');
            }
        } catch (error) {
            console.error('Error:', error);
            alert('An error occurred. Please try again.');
        }
    });
</script>