@model CommonLayer.DtoModells.UserCreateDto

<h2>Login</h2>

<form id="registerForm" method="post">
    <div>
        <label for="Email">Email</label>
        <input id="Email" name="Email" type="email" placeholder="Email" required />
    </div>
    <div>
        <label for="Password">Password</label>
        <input id="Password" name="Password" type="password" placeholder="Password" required />
    </div>
    <button type="submit">Login</button>
</form>

<!-- Link to Swagger -->
<p>Register <a href="/Account/Register" target="_blank">View Swagger Docs</a></p>
<p>Want to see the API documentation? <a href="/swagger" target="_blank">View Swagger Docs</a></p>

<script>
    document.getElementById("registerForm").addEventListener("submit", async function (e) {
        e.preventDefault();  
        let formData = {
            Email: document.getElementById("Email").value,
            Password: document.getElementById("Password").value,
        };

        try {
            const response = await fetch('@Url.Action("Login", "Account")', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',  
                },
                body: JSON.stringify(formData) 
            });

            if (response.ok) {
                window.location.href = '/Dashboard/Index';  
            } else {
                alert('Login failed. Please check your credentials and try again.');
            }
        } catch (error) {
            console.error('Error:', error);
            alert('An error occurred. Please try again.');
        }
    });
</script>